{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getAccessToken = getAccessToken;\nexports.initializeJourney = initializeJourney;\n\nvar _request = _interopRequireDefault(require(\"./request\"));\n\nvar _auth = require(\"./../actions/auth\");\n\nvar _uuid = require(\"uuid\");\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nfunction getAccessToken(dispatch, code, type) {\n  (0, _request[\"default\"])(dispatch, '/token', 'POST', {\n    code: code\n  }, {}, function (response) {\n    dispatch((0, _auth.setAccessToken)(response.access_token, response.refresh_token));\n\n    if (response.access_token && response.refresh_token) {\n      localStorage.setItem('token', response.access_token);\n      localStorage.setItem('refresh_token', response.refresh_token);\n    }\n\n    sessionStorage.removeItem('type', type);\n    document.location.href = \"/\".concat(type);\n  });\n}\n\nfunction initializeJourney(dispatch, type) {\n  var sessionId = sessionStorage.getItem('session_id');\n  if (!sessionId) sessionStorage.setItem('session_id', (0, _uuid.v5)('http://openbanking.apithon', _uuid.v5.URL));\n  (0, _request[\"default\"])(dispatch, \"/\".concat(type, \"/init\"), 'GET', null, {}, function (response) {\n    sessionStorage.setItem('type', type); // set url as per server response\n\n    document.location = response;\n  });\n}","map":{"version":3,"sources":["C:/Training/Apithon/openbanking-ui-master/packages/ui-data/lib/services/auth-service.js"],"names":["Object","defineProperty","exports","value","getAccessToken","initializeJourney","_request","_interopRequireDefault","require","_auth","_uuid","obj","__esModule","dispatch","code","type","response","setAccessToken","access_token","refresh_token","localStorage","setItem","sessionStorage","removeItem","document","location","href","concat","sessionId","getItem","v5","URL"],"mappings":"AAAA;;AAEAA,MAAM,CAACC,cAAP,CAAsBC,OAAtB,EAA+B,YAA/B,EAA6C;AAC3CC,EAAAA,KAAK,EAAE;AADoC,CAA7C;AAGAD,OAAO,CAACE,cAAR,GAAyBA,cAAzB;AACAF,OAAO,CAACG,iBAAR,GAA4BA,iBAA5B;;AAEA,IAAIC,QAAQ,GAAGC,sBAAsB,CAACC,OAAO,CAAC,WAAD,CAAR,CAArC;;AAEA,IAAIC,KAAK,GAAGD,OAAO,CAAC,mBAAD,CAAnB;;AAEA,IAAIE,KAAK,GAAGF,OAAO,CAAC,MAAD,CAAnB;;AAEA,SAASD,sBAAT,CAAgCI,GAAhC,EAAqC;AAAE,SAAOA,GAAG,IAAIA,GAAG,CAACC,UAAX,GAAwBD,GAAxB,GAA8B;AAAE,eAAWA;AAAb,GAArC;AAA0D;;AAEjG,SAASP,cAAT,CAAwBS,QAAxB,EAAkCC,IAAlC,EAAwCC,IAAxC,EAA8C;AAC5C,GAAC,GAAGT,QAAQ,CAAC,SAAD,CAAZ,EAAyBO,QAAzB,EAAmC,QAAnC,EAA6C,MAA7C,EAAqD;AACnDC,IAAAA,IAAI,EAAEA;AAD6C,GAArD,EAEG,EAFH,EAEO,UAAUE,QAAV,EAAoB;AACzBH,IAAAA,QAAQ,CAAC,CAAC,GAAGJ,KAAK,CAACQ,cAAV,EAA0BD,QAAQ,CAACE,YAAnC,EAAiDF,QAAQ,CAACG,aAA1D,CAAD,CAAR;;AAEA,QAAIH,QAAQ,CAACE,YAAT,IAAyBF,QAAQ,CAACG,aAAtC,EAAqD;AACnDC,MAAAA,YAAY,CAACC,OAAb,CAAqB,OAArB,EAA8BL,QAAQ,CAACE,YAAvC;AACAE,MAAAA,YAAY,CAACC,OAAb,CAAqB,eAArB,EAAsCL,QAAQ,CAACG,aAA/C;AACD;;AAEDG,IAAAA,cAAc,CAACC,UAAf,CAA0B,MAA1B,EAAkCR,IAAlC;AACAS,IAAAA,QAAQ,CAACC,QAAT,CAAkBC,IAAlB,GAAyB,IAAIC,MAAJ,CAAWZ,IAAX,CAAzB;AACD,GAZD;AAaD;;AAED,SAASV,iBAAT,CAA2BQ,QAA3B,EAAqCE,IAArC,EAA2C;AACzC,MAAIa,SAAS,GAAGN,cAAc,CAACO,OAAf,CAAuB,YAAvB,CAAhB;AACA,MAAI,CAACD,SAAL,EAAgBN,cAAc,CAACD,OAAf,CAAuB,YAAvB,EAAqC,CAAC,GAAGX,KAAK,CAACoB,EAAV,EAAc,4BAAd,EAA4CpB,KAAK,CAACoB,EAAN,CAASC,GAArD,CAArC;AAChB,GAAC,GAAGzB,QAAQ,CAAC,SAAD,CAAZ,EAAyBO,QAAzB,EAAmC,IAAIc,MAAJ,CAAWZ,IAAX,EAAiB,OAAjB,CAAnC,EAA8D,KAA9D,EAAqE,IAArE,EAA2E,EAA3E,EAA+E,UAAUC,QAAV,EAAoB;AACjGM,IAAAA,cAAc,CAACD,OAAf,CAAuB,MAAvB,EAA+BN,IAA/B,EADiG,CAC3D;;AAEtCS,IAAAA,QAAQ,CAACC,QAAT,GAAoBT,QAApB;AACD,GAJD;AAKD","sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getAccessToken = getAccessToken;\nexports.initializeJourney = initializeJourney;\n\nvar _request = _interopRequireDefault(require(\"./request\"));\n\nvar _auth = require(\"./../actions/auth\");\n\nvar _uuid = require(\"uuid\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nfunction getAccessToken(dispatch, code, type) {\n  (0, _request[\"default\"])(dispatch, '/token', 'POST', {\n    code: code\n  }, {}, function (response) {\n    dispatch((0, _auth.setAccessToken)(response.access_token, response.refresh_token));\n\n    if (response.access_token && response.refresh_token) {\n      localStorage.setItem('token', response.access_token);\n      localStorage.setItem('refresh_token', response.refresh_token);\n    }\n\n    sessionStorage.removeItem('type', type);\n    document.location.href = \"/\".concat(type);\n  });\n}\n\nfunction initializeJourney(dispatch, type) {\n  var sessionId = sessionStorage.getItem('session_id');\n  if (!sessionId) sessionStorage.setItem('session_id', (0, _uuid.v5)('http://openbanking.apithon', _uuid.v5.URL));\n  (0, _request[\"default\"])(dispatch, \"/\".concat(type, \"/init\"), 'GET', null, {}, function (response) {\n    sessionStorage.setItem('type', type); // set url as per server response\n\n    document.location = response;\n  });\n}"]},"metadata":{},"sourceType":"script"}